pipeline {
   agent any
tools {
    maven 'Maven 3.6.0'
    jdk 'java1.8.0'
  }
   stages {
      stage('Build') {
           steps {
           
           sh "mvn -B -DskipTests clean package"
         }
        }
        stage('Deploy') {
           steps {
            sh 'java -jar target/my-app-1.0-SNAPSHOT.jar'
            }
        }
        stage('Test'){
        steps {
        sh 'mvn test'
        }
        }
        stage('Artifactory') {
        steps {
        
        rtServer {
    id: "Artifactory-1",
    url: "http://104.211.226.39:8081/artifactory",
    username: "admin",
    password: "javeed@90"
}
}
rtUpload {{
    serverId: "Artifactory-1",
    spec:
        """{
          "files": {
            {
              "pattern": "bazinga/*froggy*.zip",
              "target": "bazinga-repo/froggy-files/"
            }
         }
        }"""
}
}
}
   }
}
